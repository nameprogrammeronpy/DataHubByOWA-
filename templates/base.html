<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DataHub ВУЗ-ов РК{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/style.css?v=4.0">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Навигация -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>DataHub <span class="accent">ВУЗ-ов РК</span></span>
            </a>
            <ul class="nav-links">
                <li><a href="/" class="{% if request.url.path == '/' %}active{% endif %}"><i class="fas fa-home"></i> Главная</a></li>
                <li><a href="/career-test" class="{% if request.url.path == '/career-test' %}active{% endif %}"><i class="fas fa-brain"></i> Тест</a></li>
                <li><a href="/compare" class="{% if request.url.path == '/compare' %}active{% endif %}"><i class="fas fa-balance-scale"></i> Сравнение</a></li>
                <li><a href="/faq" class="{% if request.url.path == '/faq' %}active{% endif %}"><i class="fas fa-question-circle"></i> FAQ</a></li>
            </ul>
            <div class="nav-auth" id="navAuth">
                <a href="/login" class="btn btn-outline btn-sm" id="loginBtn"><i class="fas fa-sign-in-alt"></i> Войти</a>
            </div>
            <div class="nav-burger" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Мобильное меню -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="/" onclick="toggleMobileMenu()"><i class="fas fa-home"></i> Главная</a>
        <a href="/career-test" onclick="toggleMobileMenu()"><i class="fas fa-brain"></i> Тест</a>
        <a href="/compare" onclick="toggleMobileMenu()"><i class="fas fa-balance-scale"></i> Сравнение</a>
        <a href="/faq" onclick="toggleMobileMenu()"><i class="fas fa-question-circle"></i> FAQ</a>
        <a href="/login" id="mobileLoginBtn"><i class="fas fa-user"></i> Войти</a>
    </div>

    <!-- Основной контент -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Футер -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3><i class="fas fa-graduation-cap"></i> DataHub</h3>
                    <p>Единая платформа для выбора университета в Казахстане. Данные, аналитика, AI-рекомендации.</p>
                    <div class="footer-social">
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Платформа</h4>
                    <a href="/">Каталог вузов</a>
                    <a href="/compare">Сравнение</a>
                    <a href="/career-test">Профтест</a>
                </div>
                <div class="footer-section">
                    <h4>Поддержка</h4>
                    <a href="/faq">FAQ</a>
                    <a href="#">Обратная связь</a>
                    <a href="#">Документация</a>
                </div>
                <div class="footer-section">
                    <h4>Контакты</h4>
                    <a href="#">info@datahub.kz</a>
                    <a href="#">Астана, Казахстан</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>2025 DataHub. Hackathon Project. Made with AI.</p>
            </div>
        </div>
    </footer>

    <!-- AI Чат-бот -->
    <button class="chat-fab" onclick="toggleChatbot()" id="chatFab">
        <i class="fas fa-comments"></i>
    </button>

    <!-- Окно чат-бота -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">
                    <i class="fas fa-brain"></i>
                </div>
                <div>
                    <h4>DataHub AI</h4>
                    <span>Интеллектуальный помощник</span>
                </div>
            </div>
            <button class="chat-close" onclick="toggleChatbot()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot">
                <div class="chat-message-avatar">
                    <i class="fas fa-brain"></i>
                </div>
                <div class="chat-message-content">
                    <p>Добро пожаловать в DataHub AI. Я помогу подобрать университет, сравнить программы и ответить на вопросы о поступлении.</p>
                </div>
            </div>
        </div>
        <div class="chat-quick-actions">
            <button class="quick-action" onclick="quickQuestion('Какой вуз лучше для IT?')">IT-направление</button>
            <button class="quick-action" onclick="quickQuestion('Расскажи про гранты')">Гранты</button>
            <button class="quick-action" onclick="quickQuestion('Топ университетов')">ТОП вузов</button>
        </div>
        <div class="chat-input-wrapper">
            <input type="text" class="chat-input" id="chatInput" placeholder="Задайте вопрос..." onkeypress="handleKeyPress(event)">
            <button class="chat-send" onclick="sendMessage()" id="sendBtn">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <script src="/static/js/main.js?v=3.0"></script>
    <script>
        // Проверка авторизации и обновление навигации
        document.addEventListener('DOMContentLoaded', () => {
            const user = localStorage.getItem('user');
            const navAuth = document.getElementById('navAuth');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');

            if (user) {
                const userData = JSON.parse(user);
                navAuth.innerHTML = `
                    <a href="/profile" class="btn btn-primary btn-sm">
                        <i class="fas fa-user"></i> ${userData.username}
                    </a>
                `;
                if (mobileLoginBtn) {
                    mobileLoginBtn.href = '/profile';
                    mobileLoginBtn.innerHTML = '<i class="fas fa-user"></i> Профиль';
                }
            }
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>

