{% extends "base.html" %}

{% block title %}DataHub ВУЗ-ов РК — Каталог университетов Казахстана{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-content">
        <h1>Твоё будущее начинается с <span class="gradient-text">правильного выбора</span></h1>
        <p>Единая платформа для выбора университета в Казахстане. Сравнивай, анализируй и принимай решения на основе данных</p>
        <div class="hero-search">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Поиск по названию, городу или специальности..." oninput="filterUniversities()">
        </div>
        <div class="hero-stats">
            <div class="stat">
                <span class="stat-number" data-count="55">0</span>
                <span class="stat-label">Университетов</span>
            </div>
            <div class="stat">
                <span class="stat-number" data-count="500">0</span>
                <span class="stat-label">Программ обучения</span>
            </div>
            <div class="stat">
                <span class="stat-number">AI</span>
                <span class="stat-label">Интеллектуальный помощник</span>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <h2 class="section-title">Возможности <span class="gradient-text">платформы</span></h2>
        <div class="features-grid">
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-university"></i></div>
                <h3>Детальная информация</h3>
                <p>История, миссия, руководство и ключевые достижения каждого университета</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-graduation-cap"></i></div>
                <h3>Образовательные программы</h3>
                <p>Полный каталог специальностей бакалавриата и магистратуры с описанием</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-file-alt"></i></div>
                <h3>Требования и поступление</h3>
                <p>Минимальные баллы ЕНТ, документы, дедлайны и процедура подачи заявки</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-cube"></i></div>
                <h3>Виртуальные 3D-туры</h3>
                <p>Исследуй кампусы университетов не выходя из дома</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-globe-americas"></i></div>
                <h3>Международные программы</h3>
                <p>Партнёрские вузы, программы обмена и двойные дипломы</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-chart-bar"></i></div>
                <h3>Умное сравнение</h3>
                <p>Сравнивай университеты по ключевым параметрам в один клик</p>
            </div>
        </div>
    </div>
</section>

<!-- Filters Section -->
<section class="filters-section">
    <div class="container">
        <div class="filters-bar">
            <div class="filter-group">
                <label>Город:</label>
                <select id="filterCity" onchange="filterUniversities()">
                    <option value="">Все города</option>
                    <option value="Алматы">Алматы</option>
                    <option value="Астана">Астана</option>
                    <option value="Караганда">Караганда</option>
                    <option value="Шымкент">Шымкент</option>
                    <option value="Актобе">Актобе</option>
                    <option value="Павлодар">Павлодар</option>
                    <option value="Семей">Семей</option>
                    <option value="Костанай">Костанай</option>
                    <option value="Атырау">Атырау</option>
                    <option value="Уральск">Уральск</option>
                    <option value="Усть-Каменогорск">Усть-Каменогорск</option>
                    <option value="Тараз">Тараз</option>
                    <option value="Кызылорда">Кызылорда</option>
                    <option value="Актау">Актау</option>
                    <option value="Петропавловск">Петропавловск</option>
                    <option value="Талдыкорган">Талдыкорган</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Направление:</label>
                <select id="filterFocus" onchange="filterUniversities()">
                    <option value="">Все</option>
                    <option value="Классический">Классический</option>
                    <option value="Технический">Технический</option>
                    <option value="Медицинский">Медицинский</option>
                    <option value="Бизнес">Бизнес</option>
                    <option value="Педагогический">Педагогический</option>
                    <option value="Аграрный">Аграрный</option>
                    <option value="Юридический">Юридический</option>
                    <option value="Творческий">Творческий</option>
                    <option value="Исследовательский">Исследовательский</option>
                    <option value="Гуманитарный">Гуманитарный</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Сортировка:</label>
                <select id="sortBy" onchange="filterUniversities()">
                    <option value="rating">По рейтингу</option>
                    <option value="price_low">Цена (сначала дешевле)</option>
                    <option value="price_high">Цена (сначала дороже)</option>
                    <option value="ent">По мин. баллу ЕНТ</option>
                </select>
            </div>
        </div>
    </div>
</section>

<!-- Universities Grid -->
<section class="universities-section">
    <div class="container">
        <h2 class="section-title">Университеты <span class="gradient-text">Казахстана</span></h2>
        <div class="universities-grid" id="universitiesGrid">
            {% for uni in universities %}
            <div class="university-card"
                 data-name="{{ uni.name_ru.lower() }}"
                 data-city="{{ uni.city }}"
                 data-focus="{{ uni.focus }}"
                 data-rating="{{ uni.rating }}"
                 data-price="{{ uni.tuition_kzt_year }}"
                 data-ent="{{ uni.ent_min_score }}">
                <div class="card-image">
                    <div class="card-overlay">
                        <span class="card-city"><i class="fas fa-map-marker-alt"></i> {{ uni.city }}</span>
                        <span class="card-rating"><i class="fas fa-star"></i> {{ uni.rating }}</span>
                    </div>
                    {% if uni.image_url and uni.image_url.startswith('/preview') %}
                    <img src="{{ uni.image_url }}" alt="{{ uni.name_ru }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="card-placeholder" style="display:none;">
                        <i class="fas fa-university"></i>
                    </div>
                    {% else %}
                    <div class="card-placeholder">
                        <i class="fas fa-university"></i>
                    </div>
                    {% endif %}
                    {% if uni.tour_url %}
                    <span class="uni-3d-badge"><i class="fas fa-cube"></i> 3D тур</span>
                    {% endif %}
                </div>
                <div class="card-content">
                    <h3 class="card-title">{{ uni.name_ru }}</h3>
                    <p class="card-description">{{ uni.description[:100] }}...</p>
                    <div class="card-tags">
                        <span class="tag">{{ uni.focus }}</span>
                        <span class="tag">ЕНТ от {{ uni.ent_min_score }}</span>
                    </div>
                    <div class="card-price">
                        <span class="price-label">от</span>
                        <span class="price-value">{{ "{:,.0f}".format(uni.tuition_kzt_year).replace(",", " ") }} ₸</span>
                        <span class="price-period">/год</span>
                    </div>
                    <div class="card-actions">
                        <a href="/university/{{ uni.id }}" class="btn btn-primary">Подробнее</a>
                        <button class="btn btn-outline" onclick="addToCompare({{ uni.id }}, '{{ uni.name_ru }}')">
                            <i class="fas fa-plus"></i> Сравнить
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Compare Float Panel -->
<div class="compare-panel" id="comparePanel">
    <div class="compare-header">
        <span><i class="fas fa-balance-scale"></i> Сравнение (<span id="compareCount">0</span>)</span>
        <button onclick="clearCompare()"><i class="fas fa-trash"></i></button>
    </div>
    <div class="compare-list" id="compareList"></div>
    <a href="/compare" class="btn btn-primary btn-full" id="goCompareBtn" onclick="saveCompareToStorage()">Сравнить выбранные</a>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Данные университетов для фильтрации
    const universities = {{ universities | tojson | safe }};
</script>
{% endblock %}

